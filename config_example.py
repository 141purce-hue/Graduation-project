# 病虫害识别系统配置文件示例
# 复制此文件为 config.py 并根据需要修改参数

# ============================================================
# 模型配置
# ============================================================

# YOLO模型文件路径
# 支持相对路径和绝对路径
# 示例：
#   MODEL_PATH = "best.pt"                    # 当前目录
#   MODEL_PATH = "models/best.pt"             # 子目录
#   MODEL_PATH = "C:/models/tomato_best.pt"   # 绝对路径
MODEL_PATH = "best.pt"

# 置信度阈值 (0.0-1.0)
# 值越高，检测越严格，只显示高置信度的结果
# 值越低，检测越宽松，可能出现误检
# 推荐值：
#   0.3 - 宽松模式，检测更多目标
#   0.5 - 平衡模式（默认）
#   0.7 - 严格模式，只显示高置信度结果
CONFIDENCE_THRESHOLD = 0.5

# ============================================================
# 窗口配置
# ============================================================

# 窗口宽度（像素）
# 推荐值：1200-1600
WINDOW_WIDTH = 1400

# 窗口高度（像素）
# 推荐值：800-1000
WINDOW_HEIGHT = 900

# 窗口标题
# 可以自定义为任何文字
WINDOW_TITLE = "🌿 番茄病虫害智能识别系统"

# ============================================================
# 类别配置
# ============================================================

# 识别类别名称列表
# 注意：顺序必须与模型训练时的类别顺序一致
CLASS_NAMES = [
    "Healthy Leaf",                    # 健康叶片
    "Leaf Mold",                       # 叶霉病
    "Septoria leaf spot",              # 斑点病
    "Tomato leaf bacterial spot"       # 细菌性斑点病
]

# 类别颜色配置（用于界面显示）
# 使用十六进制颜色代码
# 可以使用在线颜色选择器选择喜欢的颜色
CLASS_COLORS = {
    "Healthy Leaf": "#27ae60",                    # 绿色 - 表示健康
    "Leaf Mold": "#e67e22",                       # 橙色 - 表示警告
    "Septoria leaf spot": "#e74c3c",              # 红色 - 表示严重
    "Tomato leaf bacterial spot": "#9b59b6"       # 紫色 - 表示特殊
}

# ============================================================
# 视频处理配置
# ============================================================

# 视频帧延迟（毫秒）
# 控制视频播放速度和系统资源占用
# 值越小，播放越流畅，但占用资源越多
# 值越大，播放越卡顿，但占用资源越少
# 推荐值：
#   20 - 高性能电脑，流畅播放
#   30 - 普通电脑（默认）
#   50 - 低性能电脑，节省资源
VIDEO_FRAME_DELAY = 30

# ============================================================
# 文件格式配置
# ============================================================

# 支持的图片文件格式
# 格式：Qt文件对话框过滤器字符串
IMAGE_FORMATS = "图片文件 (*.jpg *.jpeg *.png *.bmp);;所有文件 (*.*)"

# 支持的视频文件格式
# 格式：Qt文件对话框过滤器字符串
VIDEO_FORMATS = "视频文件 (*.mp4 *.avi *.mov *.mkv);;所有文件 (*.*)"

# ============================================================
# 高级配置（一般不需要修改）
# ============================================================

# 图像显示最大尺寸（像素）
# 用于限制显示图片的最大尺寸，避免内存占用过大
MAX_DISPLAY_SIZE = (1920, 1080)

# 结果文本最大行数
# 超过此行数后，旧的结果会被自动清除
MAX_RESULT_LINES = 1000

# 是否显示调试信息
DEBUG_MODE = False

# ============================================================
# 自定义配置示例
# ============================================================

# 示例1：使用不同的模型文件
# MODEL_PATH = "models/yolov8n_tomato.pt"

# 示例2：降低置信度阈值，检测更多目标
# CONFIDENCE_THRESHOLD = 0.3

# 示例3：增大窗口尺寸
# WINDOW_WIDTH = 1600
# WINDOW_HEIGHT = 1000

# 示例4：自定义类别颜色
# CLASS_COLORS = {
#     "Healthy Leaf": "#00ff00",
#     "Leaf Mold": "#ff9900",
#     "Septoria leaf spot": "#ff0000",
#     "Tomato leaf bacterial spot": "#9900ff"
# }

# 示例5：调整视频帧率
# VIDEO_FRAME_DELAY = 20  # 更流畅

# ============================================================
# 配置验证（不要修改）
# ============================================================

def validate_config():
    """验证配置参数是否合法"""
    errors = []
    
    # 检查置信度阈值
    if not 0.0 <= CONFIDENCE_THRESHOLD <= 1.0:
        errors.append(f"CONFIDENCE_THRESHOLD 必须在 0.0-1.0 之间，当前值: {CONFIDENCE_THRESHOLD}")
    
    # 检查窗口尺寸
    if WINDOW_WIDTH < 800 or WINDOW_HEIGHT < 600:
        errors.append(f"窗口尺寸过小，建议至少 800x600，当前: {WINDOW_WIDTH}x{WINDOW_HEIGHT}")
    
    # 检查类别数量
    if len(CLASS_NAMES) != len(CLASS_COLORS):
        errors.append(f"CLASS_NAMES 和 CLASS_COLORS 数量不匹配")
    
    # 检查视频帧延迟
    if VIDEO_FRAME_DELAY < 10:
        errors.append(f"VIDEO_FRAME_DELAY 过小可能导致系统卡顿，建议至少 10ms")
    
    if errors:
        print("⚠️ 配置验证失败：")
        for error in errors:
            print(f"  - {error}")
        return False
    else:
        print("✅ 配置验证通过")
        return True

# 如果直接运行此文件，执行配置验证
if __name__ == "__main__":
    validate_config()

